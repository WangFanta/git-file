直接从物理内存读写数据要比从硬盘读写数据要快的多因此，我们希望所有数据的读取和写入都在内存完成，而内存是有限的，
这样就引出了物理内存与虚拟内存的概念。
物理内存就是系统硬件提供的内存大小，是真正的内存，相对于物理内存，在linux下还有一个虚拟内存的概念，虚拟内存的磁盘空间被称
为交换空间（Swap Space）。
作为物理内存的扩展，linux会在物理内存不足时，使用交换分区的虚拟内存，更详细的说，就是内核会将暂时不用的内存块信息写到交换
空间，这样以来，物理内存得到了释放，这块内存就可以用于其它目的，当需要用到原始的内容时，这些信息会被重新从交换空间读入物理
内存。
linux的内存管理采取的是分页存取机制，为了保证物理内存能得到充分的利用，内核会在适当的时候将物理内存中不经常使用的数据块自
动交换到虚拟内存中，而将经常使用的信息保留到物理内存。
一、Linux系统会不时的进行页面交换操作，以保持尽可能多的空闲物理内存，即使并没有什么事情需要内存，Linux也会交换出暂时不用的内
存页面。这可以避免等待交换所需的时间。
二、linux进行页面交换是有条件的，不是所有页面在不用时都交换到虚拟内存，linux内核根据”最近最经常使用“算法，仅仅将一些不经
常使用的页面文件交换到虚拟内存

free： 监控内存 -m：以M为单位查看内存使用情况（默认为kb） -b：以字节为单位查看内存使用情况
total：物理内存的总大小。 
used：已经使用的物理内存多小。 
free：空闲的物理内存值。 
shared：多个进程共享的内存值。
buffers/cached：磁盘缓存的大小。 
第二行Mem：代表物理内存使用情况。
第三行(-/+ buffers/cached)：代表磁盘缓存使用状态。
第四行：Swap表示交换空间内存使用状态

buffers主要用来存放目录里面有什么内容，文件的属性以及权限等等。而cached直接用来记忆我们打开过的文件和程序



top
Top 命令能够实时监控系统的运行状态，并且可以按照cpu、内存和执行时间进行排序
task：
    total 进程总数
    running 正在运行的进程数
当系统出问题，追查至内存的时候，要判定内存是否是异常源，先看free指令数据。
   先看交换区swap的使用情况，因为linux的内存机制，当swap不够用的时候，系统会出现假死，当然真的假死的时候，你就看不到了；
   但是在假死前期，你还是能看到数据，做一些补救工作。如果交换区不正常，则进入vmstat指令；如果正常，则看内存空闲情况，
   主要关注linux内存机制的free和物理内存的buffers和cached，正常则不用追查，否则进入vmstat做进一步的判断
当交换区不够用的时候，物理内存基本上也到瓶颈了。如果内存基本耗光了，而系统因此被拖的很慢，你就可以看vmstat中swap是否存在大量的读写
 top能看到当前进程的实时数据，其实主要就是看谁消耗太多内存资源，判断是否能手动kill然后释放资源的问题。
 


vmstat
vmstat 1    1表示每秒采集一次
vmstat 2 1    2表示2秒采集一次，1表示只采集一次
r 表示运行队列(就是说多少个进程真的分配到CPU)
    当这个值超过了CPU数目，就会出现CPU瓶颈了。这个也和top的负载有关系，一般负载超过了3就比较高，超过了5就高，超过了10就不正常了
b 表示阻塞的进程
memory:
    swpd 虚拟内存已使用的大小
    如果大于0，表示机器物理内存不足了，如果不是程序内存泄露的原因，那么升级内存或者把耗内存的任务迁移到其他机器
    free   空闲的物理内存的大小
    buff 设备和设备之间的缓冲
    cache  cpu和内存之间的缓冲
swap:
    si  每秒从磁盘读入虚拟内存的大小，如果这个值大于0，表示物理内存不够用或者内存泄露了
    so  每秒虚拟内存写入磁盘的大小，如果这个值大于0，同上
io:
    bi  块设备每秒接收的块数量，这里的块设备是指系统上所有的磁盘和其他块设备，默认块大小是1024byte
        本机上没什么IO操作，所以一直是0，处理拷贝大量数据(2-3T)的机器上看过可以达到140000/s，磁盘写入速度差不多140M每秒
    bo 块设备每秒发送的块数量，例如我们读取文件，bo就要大于0。bi和bo一般都要接近0，不然就是IO过于频繁，需要调整
system:
    ci 每秒上下文切换次数
       例如调用系统函数，就要进行上下文切换，线程的切换，也要进程上下文切换，这个值要越小越好
       上下文切换次数过多表示CPU大部分浪费在上下文切换，导致CPU干正经事的时间少了，CPU没有充分利用，是不可取的
